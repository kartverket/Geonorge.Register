@model Kartverket.Register.Models.ViewModels.InspireRegistryStatusReportViewModel

<script>

    $(document).ready(function () {
        var parameterStatusType = getParameterByName("statustype");
        var statusTypeAll = parameterStatusType == "all" || parameterStatusType == "";
        console.log(parameterStatusType);
        console.log(statusTypeAll);
        var selectedView = localStorage.getItem("SelectedViewButtons");

        if (statusTypeAll) {
            ShowAllChart();
        } else {
            ShowStatusChart();
        }
        reportView(selectedView, null);
        var cb = document.getElementById("cbExportReport");
        ToggleExportReport(cb);
        var cbDataset = document.getElementById("cbToggleDataset");
        ToggleExportReport(cbDataset);
        var cbService = document.getElementById("cbToggleDataService");
        ToggleExportReport(cbService);
    });

    function ToggleExportReport(cb) {

        if (cb.checked) {
            document.getElementById("ExportAll").style.display = "inline-block";
            document.getElementById("ExportSelected").style.display = "none";
        } else {
            document.getElementById("ExportAll").style.display = "none";
            document.getElementById("ExportSelected").style.display = "inline-block";
        }
    }

    function ToggleDatasetReport(cb) {

        if (cb.checked) {
            
        } else {
            
        }
    }

    function ToggleDataServiceReport(cb) {

        if (cb.checked) {
            
        } else {
            
        }
    }



    function reportView(view, event) {
        var buttons = $("#reportViewButtons button");
        $.each(buttons,
            function(index, btn) {
                $(btn).removeClass("button-selected");
                $(btn.children).removeClass("button-selected");
            });

        if (event != null) {
            event.target.classList.add("button-selected");
        }

            document.getElementById(view + "Button").classList.add("button-selected");


        var i;
        var x = document.getElementsByClassName("reportViewContent");
        for (i = 0; i < x.length; i++) {
            x[i].style.display = "none";
        }
        document.getElementById(view).style.display = "block";

        localStorage.setItem("SelectedViewButtons", view);
    }

    function SelectLineChartType() {
        var chartAll = document.getElementById("lineChartAll");

        if (chartAll.style.display === "none") {
            ShowAllChart();
            localStorage.setItem("ShowAllLineCart", true);
        } else {
            ShowStatusChart();
            localStorage.setItem("ShowAllLineCart", false);
        }
    }

    function ShowAllChart() {
        var chartAll = document.getElementById("lineChartAll");
        var chartStatus = document.getElementById("lineChartStatus");

        chartAll.style.display = "block";
        chartStatus.style.display = "none";
    }

    function ShowStatusChart() {
        var chartAll = document.getElementById("lineChartAll");
        var chartStatus = document.getElementById("lineChartStatus");

        chartAll.style.display = "none";
        chartStatus.style.display = "block";
    }


    @{var javaScriptSerializer = new System.Web.Script.Serialization.JavaScriptSerializer(); }


    // *********** Inpsire dataset *************

    if (@Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport))) != null) {


        // LINE CHART

        var ctx = document.getElementById("InspireDatasetLineChart").getContext('2d');
        var InspireDatasetLineChart = new Chart(ctx, {
        plugins: [{
            beforeDraw: function (InspireDatasetLineChart) {
                var ctx = InspireDatasetLineChart.chart.ctx;
                ctx.fillStyle = "white";
                ctx.fillRect(0, 0, InspireDatasetLineChart.chart.width, InspireDatasetLineChart.chart.height);
            }
        }],
        type: 'line',
        fill: false,
        data: {
            labels: @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.LineChart.Labels))),
            datasets: [
                {
                    label: "@InspireDataSet.Metadata",
                    borderColor: 'rgb(255, 0, 0)',
                    data:@Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.LineChart.Metadata))),
                    backgroundColor: "rgb(255, 0, 0)",
                    pointRadius: @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.LineChart.PointSize))),
                    pointHoverRadius: @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.LineChart.PointSize))),
                    fill: false
                },
                {
                    label: "@InspireDataSet.MetadataServiceStatus",
                    fill: false,
                    backgroundColor: 'rgb(240, 179, 35)',
                    borderColor: 'rgb(240, 179, 35)',
                    data: @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.LineChart.MetadataService))),
                    pointRadius: @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.LineChart.PointSize))),
                    pointHoverRadius: @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.LineChart.PointSize))),
                },
                {
                    label: "@InspireDataSet.Distribution",
                    backgroundColor: "rgb(169, 196, 127)",
                    fill: false,
                    borderColor: 'rgb(169, 196, 127)',
                    data: @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.LineChart.Distribution))),
                    pointRadius: @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.LineChart.PointSize))),
                    pointHoverRadius: @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.LineChart.PointSize))),
                },
                {
                    label: "@InspireDataSet.WmsStatus",
                    backgroundColor: "rgb(254, 80, 0)",
                    fill: false,
                    borderColor: 'rgb(254, 80, 0)',
                    data: @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.LineChart.Wms))),
                    pointRadius: @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.LineChart.PointSize))),
                    pointHoverRadius: @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.LineChart.PointSize))),
                },
                {
                    label: "@InspireDataSet.WfsStatus",
                    backgroundColor: "rgb(125, 161, 196)",
                    fill: false,
                    borderColor: 'rgb(125, 161, 196)',
                    data: @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.LineChart.Wfs))),
                    pointRadius: @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.LineChart.PointSize))),
                    pointHoverRadius: @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.LineChart.PointSize))),
                },
                {
                    label: "@InspireDataSet.WfsOrAtomStatus",
                    backgroundColor: "rgb(54, 197, 69)",
                    fill: false,
                    borderColor: 'rgb(54, 197, 69)',
                    data: @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.LineChart.WfsOrAtomFeed))),
                    pointRadius: @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.LineChart.PointSize))),
                    pointHoverRadius: @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.LineChart.PointSize))),
                },
                {
                    label: "@InspireDataSet.AtomFeedStatus",
                    backgroundColor: "rgb(101, 126, 224)",
                    fill: false,
                    borderColor: 'rgb(101, 126, 224)',
                    data: @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.LineChart.AtomFeed))),
                    pointRadius: @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.LineChart.PointSize))),
                    pointHoverRadius: @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.LineChart.PointSize))),
                },
                {
                    label: "@InspireDataSet.HarmonizedDataStatus",
                    backgroundColor: 'rgb(102, 153, 102)',
                    fill: false,
                    borderColor: 'rgb(102, 153, 102)',
                    data: @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.LineChart.HarmonizedData))),
                    pointRadius: @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.LineChart.PointSize))),
                    pointHoverRadius: @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.LineChart.PointSize))),
                },
                {
                    label: "@InspireDataSet.SpatialDataServiceStatus",
                    backgroundColor: "rgb(0, 26, 0)",
                    fill: false,
                    borderColor: 'rgb(0, 26, 0)',
                    data: @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.LineChart.SpatialDataService))),
                    pointRadius: @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.LineChart.PointSize))),
                    pointHoverRadius: @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.LineChart.PointSize))),
                }
            ]
        }
    });
    }


    var ctx = document.getElementById("LineChartStatus").getContext('2d');
    var LineChartStatus = new Chart(ctx, {
        type: 'line',
        fill: false,
        data: {
            labels: @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.StatusChart.Labels))),
            datasets: [
                {
                    label: "@DataSet.DOK_Delivery_Status_Good",
                    borderColor: '#36c545',
                    data:@Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.StatusChart.Good))),
                    backgroundColor: "#36c545",
                    pointRadius: @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.StatusChart.PointSize))),
                    pointHoverRadius: @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.StatusChart.PointSize))),
                    fill: false
                },
                {
                    label: "@DataSet.DOK_Delivery_Status_Useable",
                    fill: false,
                    backgroundColor: '#fed633',
                    borderColor: '#fed633',
                    data: @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.StatusChart.Useable))),
                    pointRadius: @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.StatusChart.PointSize))),
                    pointHoverRadius: @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.StatusChart.PointSize))),
                },
                {
                    label: "@DataSet.DOK_Delivery_Status_Deficient",
                    backgroundColor: "#ee432a",
                    fill: false,
                    borderColor: '#ee432a',
                    data: @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.StatusChart.Deficient))),
                    pointRadius: @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.StatusChart.PointSize))),
                    pointHoverRadius: @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.StatusChart.PointSize))),
                },
                {
                    label: "@DataSet.DOK_Delivery_Status_NotSet",
                    backgroundColor: "#d8d8d8",
                    fill: false,
                    borderColor: '#d8d8d8',
                    data: @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.StatusChart.Notset))),
                    pointRadius: @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.StatusChart.PointSize))),
                    pointHoverRadius: @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.StatusChart.PointSize))),
                }
            ]
        }
    });

    // DATA
    var legendPie = {
        display: true,
        position: 'right',
        labels: {
            generateLabels: function (chart) {
                var data = chart.data;
                if (data.labels.length && data.datasets.length) {
                    return data.labels.map(function (label, i) {
                        var meta = chart.getDatasetMeta(0);
                        var ds = data.datasets[0];
                        var arc = meta.data[i];
                        var custom = arc && arc.custom || {};
                        var getValueAtIndexOrDefault = Chart.helpers.getValueAtIndexOrDefault;
                        var arcOpts = chart.options.elements.arc;
                        var fill = custom.backgroundColor ? custom.backgroundColor : getValueAtIndexOrDefault(ds.backgroundColor, i, arcOpts.backgroundColor);
                        var stroke = custom.borderColor ? custom.borderColor : getValueAtIndexOrDefault(ds.borderColor, i, arcOpts.borderColor);
                        var bw = custom.borderWidth ? custom.borderWidth : getValueAtIndexOrDefault(ds.borderWidth, i, arcOpts.borderWidth);

                        // We get the value of the current label
                        var value = chart.config.data.datasets[arc._datasetIndex].data[arc._index];

                        return {
                            // Instead of `text: label,`
                            // We add the value to the string
                            text: label + " : " + value,
                            fillStyle: fill,
                            strokeStyle: stroke,
                            lineWidth: bw,
                            hidden: isNaN(ds.data[i]) || meta.data[i].hidden,
                            index: i
                        };
                    });
                } else {
                    return [];
                }
            }
        }
    }


    var dataMetadata = {
        labels: ["@DataSet.DOK_Delivery_Status_Good", "@DataSet.DOK_Delivery_Status_Useable", "@DataSet.DOK_Delivery_Status_Deficient", "@DataSet.DOK_Delivery_Status_NotSet"],
        datasets: [
            {
                fill: true,
                backgroundColor: ['#36c545', '#fed633', '#ee432a', '#d8d8d8'],
                data: [@Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.NumberOfItemsWithMetadata.Good))),
                    @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.NumberOfItemsWithMetadata.Useable))),
                    @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.NumberOfItemsWithMetadata.Deficient))),
                    @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.NumberOfItemsWithMetadata.Notset)))
                ],
            }
        ]
    };

    var dataMetadataService = {
        labels: ["@DataSet.DOK_Delivery_Status_Good", "@DataSet.DOK_Delivery_Status_Useable",
            "@DataSet.DOK_Delivery_Status_Deficient", "@DataSet.DOK_Delivery_Status_NotSet"
        ],
        datasets: [
            {
                fill: true,
                backgroundColor: ['#36c545', '#fed633', '#ee432a', '#d8d8d8'],
                data: [
                    @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.NumberOfItemsWithMetadataService.Good))),
                    @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.NumberOfItemsWithMetadataService.Useable))),
                    @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.NumberOfItemsWithMetadataService.Deficient))),
                    @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.NumberOfItemsWithMetadataService.Notset)))
                ],
            }
        ]
    };

    var dataDistribution = {
        labels: ["@DataSet.DOK_Delivery_Status_Good", "@DataSet.DOK_Delivery_Status_Useable", "@DataSet.DOK_Delivery_Status_Deficient", "@DataSet.DOK_Delivery_Status_NotSet"],
            datasets: [
                {
                    fill: true,
                    backgroundColor: ['#36c545', '#fed633', '#ee432a', '#d8d8d8'],
                    data: [@Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.NumberOfItemsWithDistribution.Good))),
                        @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.NumberOfItemsWithDistribution.Useable))),
                        @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.NumberOfItemsWithDistribution.Deficient))),
                        @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.NumberOfItemsWithDistribution.Notset)))],
                }
            ]
    };

    var dataWms = {
        labels: ["@DataSet.DOK_Delivery_Status_Good", "@DataSet.DOK_Delivery_Status_Useable", "@DataSet.DOK_Delivery_Status_Deficient", "@DataSet.DOK_Delivery_Status_NotSet"],
        datasets: [
            {
                fill: true,
                backgroundColor: ['#36c545', '#fed633', '#ee432a', '#d8d8d8'],
                data: [@Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.NumberOfItemsWithWms.Good))),
                    @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.NumberOfItemsWithWms.Useable))),
                    @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.NumberOfItemsWithWms.Deficient))),
                    @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.NumberOfItemsWithWms.Notset)))],
            }
        ]
    };

    var dataWfs = {
        labels: ["@DataSet.DOK_Delivery_Status_Good", "@DataSet.DOK_Delivery_Status_Useable", "@DataSet.DOK_Delivery_Status_Deficient", "@DataSet.DOK_Delivery_Status_NotSet"],
        datasets: [
            {
                fill: true,
                backgroundColor: ['#36c545', '#fed633', '#ee432a', '#d8d8d8'],
                data: [@Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.NumberOfItemsWithWfs.Good))),
                    @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.NumberOfItemsWithWfs.Useable))),
                    @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.NumberOfItemsWithWfs.Deficient))),
                    @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.NumberOfItemsWithWfs.Notset)))],
            }
        ]
    };

    var dataWfsOrAtom = {
        labels: ["@DataSet.DOK_Delivery_Status_Good", "@DataSet.DOK_Delivery_Status_Useable", "@DataSet.DOK_Delivery_Status_Deficient", "@DataSet.DOK_Delivery_Status_NotSet"],
        datasets: [
            {
                fill: true,
                backgroundColor: ['#36c545', '#fed633', '#ee432a', '#d8d8d8'],
                data: [@Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.NumberOfItemsWithWfsOrAtom.Good))),
                    @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.NumberOfItemsWithWfsOrAtom.Useable))),
                    @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.NumberOfItemsWithWfsOrAtom.Deficient))),
                    @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.NumberOfItemsWithWfsOrAtom.Notset)))],
            }
        ]
    };

    var dataAtomFeed = {
        labels: ["@DataSet.DOK_Delivery_Status_Good", "@DataSet.DOK_Delivery_Status_Useable", "@DataSet.DOK_Delivery_Status_Deficient", "@DataSet.DOK_Delivery_Status_NotSet"],
        datasets: [
            {
                fill: true,
                backgroundColor: ['#36c545', '#fed633', '#ee432a', '#d8d8d8'],
                data: [@Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.NumberOfItemsWithAtomFeed.Good))),
                    @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.NumberOfItemsWithAtomFeed.Useable))),
                    @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.NumberOfItemsWithAtomFeed.Deficient))),
                    @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.NumberOfItemsWithAtomFeed.Notset)))],
            }
        ]
    };

    var dataHarmonizedData = {
        labels: ["@DataSet.DOK_Delivery_Status_Good", "@DataSet.DOK_Delivery_Status_Useable", "@DataSet.DOK_Delivery_Status_Deficient", "@DataSet.DOK_Delivery_Status_NotSet"],
        datasets: [
            {
                fill: true,
                backgroundColor: ['#36c545', '#fed633', '#ee432a', '#d8d8d8'],
                data: [@Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.NumberOfItemsWithHarmonizedData.Good))),
                    @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.NumberOfItemsWithHarmonizedData.Useable))),
                    @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.NumberOfItemsWithHarmonizedData.Deficient))),
                    @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.NumberOfItemsWithHarmonizedData.Notset)))],
            }
        ]
    };

    var dataSpatialDataService = {
        labels: ["@DataSet.DOK_Delivery_Status_Good", "@DataSet.DOK_Delivery_Status_Useable", "@DataSet.DOK_Delivery_Status_Deficient", "@DataSet.DOK_Delivery_Status_NotSet"],
        datasets: [
            {
                fill: true,
                backgroundColor: ['#36c545', '#fed633', '#ee432a', '#d8d8d8'],
                data: [@Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.NumberOfItemsWithSpatialDataService.Good))),
                    @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.NumberOfItemsWithSpatialDataService.Useable))),
                    @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.NumberOfItemsWithSpatialDataService.Deficient))),
                    @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.NumberOfItemsWithSpatialDataService.Notset)))],
            }
        ]
    };


    // PIE CHART

    var ctx = document.getElementById("metadataPieChart").getContext('2d');
    var metadataPieChart = new Chart(ctx, {
        type: 'pie',
        data: dataMetadata,
        options: {
            responsive: true,
            legend: legendPie
            ,
            title: {
                display: true,
                text: '@InspireDataSet.Metadata',
                fontSize: 20
            },

        }
    });


    var ctx = document.getElementById("metadataServicePieChart").getContext('2d');
    var metadataServicePieChart = new Chart(ctx, {
        type: 'pie',
        data: dataMetadataService,
        options: {
            responsive: true,
            legend: legendPie,
            title: {
                display: true,
                text: '@InspireDataSet.MetadataServiceStatus',
                fontSize: 20
            }
        }
    });

    var ctx = document.getElementById("distributionPieChart").getContext('2d');
    var distributionPieChart = new Chart(ctx, {
        type: 'pie',
        data: dataDistribution,
        options: {
            responsive: true,
            legend: legendPie,
            title: {
                display: true,
                text: '@InspireDataSet.Distribution',
                fontSize: 20
            }
        }
    });

    var ctx = document.getElementById("WmsPieChart").getContext('2d');
    var WmsPieChart = new Chart(ctx, {
        type: 'pie',
        data: dataWms,
        options: {
            responsive: true,
            legend: legendPie,
            title: {
                display: true,
                text: '@InspireDataSet.WmsStatus',
                fontSize: 20
            }
        }
    });

    var ctx = document.getElementById("WfsPieChart").getContext('2d');
    var WfsPieChart = new Chart(ctx, {
        type: 'pie',
        data: dataWfs,
        options: {
            responsive: true,
            legend: legendPie,
            title: {
                display: true,
                text: '@InspireDataSet.WfsStatus',
                fontSize: 20
            }
        }
    });

    var ctx = document.getElementById("wfsOrAtomPieChart").getContext('2d');
    var wfsOrAtomPieChart = new Chart(ctx, {
        type: 'pie',
        data: dataWfsOrAtom,
        options: {
            responsive: true,
            legend: legendPie,
            title: {
                display: true,
                text: '@InspireDataSet.WfsOrAtomStatus',
                fontSize: 20
            }
        }
    });

    var ctx = document.getElementById("atomFeedPieChart").getContext('2d');
    var atomFeedPieChart = new Chart(ctx, {
        type: 'pie',
        data: dataAtomFeed,
        options: {
            responsive: true,
            legend: legendPie,
            title: {
                display: true,
                text: '@InspireDataSet.AtomFeedStatus',
                fontSize: 20
            }
        }
    });

    var ctx = document.getElementById("harmonizedDataPieChart").getContext('2d');
    var harmonizedDataPieChart = new Chart(ctx, {
        type: 'pie',
        data: dataHarmonizedData,
        options: {
            responsive: true,
            legend: legendPie,
            title: {
                display: true,
                text: '@InspireDataSet.HarmonizedDataStatus',
                fontSize: 20
            }
        }
    });

    var ctx = document.getElementById("spatialDataPieChart").getContext('2d');
    var spatialDataPieChart = new Chart(ctx, {
            type: 'pie',
        data: dataSpatialDataService,
            options: {
                responsive: true,
                legend: legendPie,
                title: {
                    display: true,
                    text: '@InspireDataSet.SpatialDataServiceStatus',
                    fontSize: 20
                }
            }
    });


    // BAR CHART

    var ctx = document.getElementById("statusBarChart").getContext('2d');
    var InspireDatasetStatusBarChart = new Chart(ctx, {
        type: 'horizontalBar',
        data: {
            labels: [
                '@InspireDataSet.Metadata',
                '@InspireDataSet.MetadataServiceStatus',
                '@InspireDataSet.DistributionStatus',
                '@InspireDataSet.WmsStatus',
                '@InspireDataSet.WfsStatus',
                '@InspireDataSet.WfsOrAtomStatus',
                '@InspireDataSet.AtomFeedStatus',
                '@InspireDataSet.HarmonizedDataStatus',
                '@InspireDataSet.SpatialDataServiceStatus',
            ],
            datasets: [
                {
                    label: '@DataSet.DOK_Delivery_Status_Good',
                    data: [
                        @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.Percent(Model.InspireDatasetStatusReport.NumberOfItemsWithMetadata.Good)))),
                        @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.Percent(Model.InspireDatasetStatusReport.NumberOfItemsWithMetadataService.Good)))),
                        @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.Percent(Model.InspireDatasetStatusReport.NumberOfItemsWithDistribution.Good)))),
                        @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.Percent(Model.InspireDatasetStatusReport.NumberOfItemsWithWms.Good)))),
                        @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.Percent(Model.InspireDatasetStatusReport.NumberOfItemsWithWfs.Good)))),
                        @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.Percent(Model.InspireDatasetStatusReport.NumberOfItemsWithWfsOrAtom.Good)))),
                        @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.Percent(Model.InspireDatasetStatusReport.NumberOfItemsWithAtomFeed.Good)))),
                        @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.Percent(Model.InspireDatasetStatusReport.NumberOfItemsWithHarmonizedData.Good)))),
                        @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.Percent(Model.InspireDatasetStatusReport.NumberOfItemsWithSpatialDataService.Good)))),
                    ],
                    backgroundColor: '#36c545',
                },
                {
                    label: '@DataSet.DOK_Delivery_Status_Useable',
                    data: [
                        @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.Percent(Model.InspireDatasetStatusReport.NumberOfItemsWithMetadata.Useable)))),
                        @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.Percent(Model.InspireDatasetStatusReport.NumberOfItemsWithMetadataService.Useable)))),
                        @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.Percent(Model.InspireDatasetStatusReport.NumberOfItemsWithDistribution.Useable)))),
                        @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.Percent(Model.InspireDatasetStatusReport.NumberOfItemsWithWms.Useable)))),
                        @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.Percent(Model.InspireDatasetStatusReport.NumberOfItemsWithWfs.Useable)))),
                        @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.Percent(Model.InspireDatasetStatusReport.NumberOfItemsWithWfsOrAtom.Useable)))),
                        @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.Percent(Model.InspireDatasetStatusReport.NumberOfItemsWithAtomFeed.Useable)))),
                        @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.Percent(Model.InspireDatasetStatusReport.NumberOfItemsWithHarmonizedData.Useable)))),
                        @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.Percent(Model.InspireDatasetStatusReport.NumberOfItemsWithSpatialDataService.Useable)))),
                    ],
                    backgroundColor: '#fed633',
                },
                {
                    label: '@DataSet.DOK_Delivery_Status_Deficient',
                    data: [
                        @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.Percent(Model.InspireDatasetStatusReport.NumberOfItemsWithMetadata.Deficient)))),
                        @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.Percent(Model.InspireDatasetStatusReport.NumberOfItemsWithMetadataService.Deficient)))),
                        @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.Percent(Model.InspireDatasetStatusReport.NumberOfItemsWithDistribution.Deficient)))),
                        @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.Percent(Model.InspireDatasetStatusReport.NumberOfItemsWithWms.Deficient)))),
                        @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.Percent(Model.InspireDatasetStatusReport.NumberOfItemsWithWfs.Deficient)))),
                        @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.Percent(Model.InspireDatasetStatusReport.NumberOfItemsWithWfsOrAtom.Deficient)))),
                        @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.Percent(Model.InspireDatasetStatusReport.NumberOfItemsWithAtomFeed.Deficient)))),
                        @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.Percent(Model.InspireDatasetStatusReport.NumberOfItemsWithHarmonizedData.Deficient)))),
                        @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.Percent(Model.InspireDatasetStatusReport.NumberOfItemsWithSpatialDataService.Deficient)))),
                    ],
                    backgroundColor: '#ee432a',
                },
                {
                    label: '@DataSet.DOK_Delivery_Status_NotSet',
                    data: [
                        @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.Percent(Model.InspireDatasetStatusReport.NumberOfItemsWithMetadata.Notset)))),
                        @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.Percent(Model.InspireDatasetStatusReport.NumberOfItemsWithMetadataService.Notset)))),
                        @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.Percent(Model.InspireDatasetStatusReport.NumberOfItemsWithDistribution.Notset)))),
                        @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.Percent(Model.InspireDatasetStatusReport.NumberOfItemsWithWms.Notset)))),
                        @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.Percent(Model.InspireDatasetStatusReport.NumberOfItemsWithWfs.Notset)))),
                        @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.Percent(Model.InspireDatasetStatusReport.NumberOfItemsWithWfsOrAtom.Notset)))),
                        @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.Percent(Model.InspireDatasetStatusReport.NumberOfItemsWithAtomFeed.Notset)))),
                        @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.Percent(Model.InspireDatasetStatusReport.NumberOfItemsWithHarmonizedData.Notset)))),
                        @Html.Raw(HttpUtility.HtmlDecode(javaScriptSerializer.Serialize(Model.InspireDatasetStatusReport.Percent(Model.InspireDatasetStatusReport.NumberOfItemsWithSpatialDataService.Notset)))),
                    ],
                    backgroundColor: '#d8d8d8',
                }
            ]
        },
        options: {
            scales: {
                xAxes: [
                    {
                        ticks: {
                            beginAtZero: true,
                            steps: 10,
                            stepValue: 5,
                            max: 100,
                            callback: function(value, index, values) {
                                return value + " %";
                            }
                        },
                        scaleLabel: {
                            display: true,
                        },
                        stacked: true,
                    }],
                yAxes: [{ stacked: true }]
            },
            tooltips: {
                enabled: true,
                mode: 'single',
                callbacks: {
                    label: function (tooltipItems, data) {
                        return tooltipItems.yLabel + ': ' + tooltipItems.xLabel + ' %';
                    }
                }
            },
        }
    });



</script>
