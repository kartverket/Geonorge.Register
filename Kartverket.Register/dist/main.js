var kartKatalogenUrl={local:"//kartkatalog.dev.geonorge.no",test:"https://kartkatalog.test.geonorge.no",prod:"https://kartkatalog.geonorge.no"},geonorgeBaseUrl={local:"//localhost:61381",test:"www.test.geonorge.no",prod:"www.geonorge.no"},searchOptions={local:{text:"Kartkatalogen",searchTitle:"Kartkatalogen",buttonCss:"edgesKartkatalogen",listCss:"left-edge-kartkatalogen",queryParameter:"?text=",localUrl:!1,autoComplete:!0,url:kartKatalogenUrl.local+"/search",api:kartKatalogenUrl.local+"/api/search",shoppingCartUrl:kartKatalogenUrl.local+"/nedlasting",loginUrl:kartKatalogenUrl.local+"/AuthServices/SignIn?ReturnUrl=https%3A%2F%2Fnedlasting.test.geonorge.no%2FAuthServices%2FSignIn%3FReturnUrl%3Dhttps%3A%2F%2F"+geonorgeBaseUrl.local+"%2F",logoutUrl:kartKatalogenUrl.local+"/AuthServices/SignOut?ReturnUrl=http%3A%2F%2F"+geonorgeBaseUrl.local+"%2F",hosts:"localhost,geonorge.epidemo.no,geonorge.local,kartkatalog.dev.geonorge.no",epiBaseUrl:geonorgeBaseUrl.local,imageLogoPath:"/dist/images/geonorge_logo_350px_dev.svg"},dev:{text:"Kartkatalogen",searchTitle:"Kartkatalogen",buttonCss:"edgesKartkatalogen",listCss:"left-edge-kartkatalogen",queryParameter:"?text=",localUrl:!1,autoComplete:!0,url:kartKatalogenUrl.local+"/search",api:kartKatalogenUrl.local+"/api/search",shoppingCartUrl:kartKatalogenUrl.local+"/nedlasting",loginUrl:kartKatalogenUrl.local+"/AuthServices/SignIn?ReturnUrl=https%3A%2F%2Fnedlasting.test.geonorge.no%2FAuthServices%2FSignIn%3FReturnUrl%3Dhttps%3A%2F%2F"+geonorgeBaseUrl.local+"%2F",logoutUrl:kartKatalogenUrl.local+"/AuthServices/SignOut?ReturnUrl=http%3A%2F%2F"+geonorgeBaseUrl.local+"%2F",hosts:"localhost,geonorge.epidemo.no,geonorge.local,kartkatalog.dev.geonorge.no",epiBaseUrl:geonorgeBaseUrl.local,imageLogoPath:"/dist/images/geonorge_logo_350px_dev.svg"},test:{text:"Kartkatalogen",searchTitle:"Kartkatalogen",buttonCss:"edgesKartkatalogen",listCss:"left-edge-kartkatalogen",queryParameter:"?text=",localUrl:!1,autoComplete:!0,url:kartKatalogenUrl.test+"/search",api:kartKatalogenUrl.test+"/api/search",shoppingCartUrl:kartKatalogenUrl.test+"/nedlasting",loginUrl:kartKatalogenUrl.test+"/AuthServices/SignIn?ReturnUrl=https%3A%2F%2Fnedlasting.test.geonorge.no%2FAuthServices%2FSignIn%3FReturnUrl%3Dhttps%3A%2F%2F"+geonorgeBaseUrl.test+"%2F",logoutUrl:kartKatalogenUrl.test+"/AuthServices/SignOut?ReturnUrl=http%3A%2F%2F"+geonorgeBaseUrl.test+"%2F",hosts:"test.geonorge.no,kartkatalog.test.geonorge.no,register.test.geonorge.no,objektkatalog.test.geonorge.no,editor.test.geonorge.no,produktark.test.geonorge.no,validering.test.geonorge.no,159.162.102.155,kartkatalog.dev.geonorge.no,register.dev.geonorge.no,objektkatalog.dev.geonorge.no,editor.dev.geonorge.no,produktark.dev.geonorge.no,validering.dev.geonorge.no,159.162.102.155,kartkatalog.dev.geonorge.no,register.dev.geonorge.no,objektkatalog.dev.geonorge.no,editor.dev.geonorge.no,produktark.dev.geonorge.no,validering.dev.geonorge.no,159.162.102.155",epiBaseUrl:"//"+geonorgeBaseUrl.test,imageLogoPath:"/dist/images/geonorge_logo_350px_test.svg"},prod:{text:"Kartkatalogen",searchTitle:"Kartkatalogen",buttonCss:"edgesKartkatalogen",listCss:"left-edge-kartkatalogen",queryParameter:"?text=",localUrl:!1,autoComplete:!0,url:kartKatalogenUrl.prod+"/search",api:kartKatalogenUrl.prod+"/api/search",shoppingCartUrl:kartKatalogenUrl.prod+"/nedlasting",loginUrl:kartKatalogenUrl.prod+"/AuthServices/SignIn?ReturnUrl=https%3A%2F%2Fnedlasting.geonorge.no%2FAuthServices%2FSignIn%3FReturnUrl%3Dhttps%3A%2F%2F"+geonorgeBaseUrl.prod+"%2F",logoutUrl:kartKatalogenUrl.prod+"/AuthServices/SignOut?ReturnUrl=http%3A%2F%2F"+geonorgeBaseUrl.prod+"%2F",hosts:"geonorge.no,kartkatalog.geonorge.no,register.geonorge.no,objektkatalog.geonorge.no,editor.geonorge.no,produktark.geonorge.no,validering.geonorge.no,159.162.102.155",epiBaseUrl:"//"+geonorgeBaseUrl.prod,imageLogoPath:"/dist/images/geonorge_logo_350px.svg"}},searchOption=searchOptions.prod,applicationEnvironment=applicationEnvironment||"";if(""!==applicationEnvironment)var searchOption=searchOptions[applicationEnvironment];searchOption.supportsLogin=void 0!==searchOption.supportsLogin?searchOption.supportsLogin:!0,searchOption.supportsCulture=void 0!==searchOption.supportsCulture?searchOption.supportsCulture:!0;
angular.module("geonorge-header",["ui.bootstrap"]);
!function(){var e=angular.module("geonorge-header");e.controller("baseController",["$scope","$http",function(e,o){switch("undefined"!=typeof Cookies?e.langCode=Cookies.get("_culture"):e.langCode="no",e.localizedText={search:{en:"Search",no:"Søk"},menu:{en:"Menu",no:"Meny"},login:{en:"Login",no:"Logg inn"},logout:{en:"Log out",no:"Logg ut"}},e.langCode){case"en":e.cultureSwitchName="Norsk",e.cultureSwitchCode="no",cultureData&&(e.cultureSwitchUrl=cultureData.friendlyUrlNO);break;default:e.cultureSwitchName="English",e.cultureSwitchCode="en",cultureData&&(e.cultureSwitchUrl=cultureData.friendlyUrlEN)}e.switchCulture=function(e){document.cookie="_culture="+e+"; path=/;domain=.geonorge.no"},"undefined"!=typeof Cookies&&(e.loggedIn=Cookies.get("_loggedIn")),void 0!==searchOption.loggedIn&&(e.loggedIn=searchOption.loggedIn),e.imageLogoPath="/dist/images/geonorge_logo_350px.svg",void 0!==searchOption.imageLogoPath&&(e.imageLogoPath=searchOption.imageLogoPath),e.epiBaseUrl="//www.geonorge.no",void 0!==searchOption.epiBaseUrl&&(e.epiBaseUrl=searchOption.epiBaseUrl),e.shoppingCartUrl="//kartkatalog.geonorge.no/nedlasting",void 0!==searchOption.shoppingCartUrl&&(e.shoppingCartUrl=searchOption.shoppingCartUrl)}])}();
!function(){var o=angular.module("geonorge-header");o.controller("menuTopController",["$scope","$http",function(o,e){function r(e){var r=e.data;o.menuItems=r}function t(e){o.getMenuError=!0,console.debug("Error while getting menuItems",e)}o.trustSrc=function(o){return $sce.trustAsResourceUrl(o)},o.getMenuData=function(){var o="";void 0!==searchOption.epiBaseUrl&&(o=searchOption.epiBaseUrl);var n=o+"/api/menu?omitLinks=1",a=e({method:"GET",url:n,headers:{"Content-Type":"application/json; charset=utf-8",accept:"*/*"},data:{},crossDomain:!0});return a.then(r,t)},o.loginUrl="//kartkatalog.geonorge.no/AuthServices/SignIn?ReturnUrl=http%3A%2F%2Fwww.geonorge.no%2F",void 0!==searchOption.loginUrl&&(o.loginUrl=searchOption.loginUrl),o.logoutUrl="//kartkatalog.geonorge.no/AuthServices/SignOut?ReturnUrl=http%3A%2F%2Fwww.geonorge.no%2F",void 0!==searchOption.logoutUrl&&(o.logoutUrl=searchOption.logoutUrl)}])}();
!function(){const e=13,t=38,a=40,r=16,n=9,l=37,o=39;var u=angular.module("geonorge-header");u.service("aggregatedService",["$http","$q",function(e,t){function a(e){u=e}function r(e){return t(function(t){void 0==u?t():u(e)})}function n(a,r,n,l){function o(e,t){var a="facets[1]name=type&facets[1]value="+e,r="text="+t,n="en";return void 0!==cultureData.currentCulture&&""!==cultureData.currentCulture&&"no"!=cultureData.currentCulture||(n="no"),"?limit=5&"+a+"&"+r+"&lang="+n}var u=encodeURI(searchOption.api+o("dataset",a)),c=e({method:"GET",url:u,headers:{"Content-Type":"application/json; charset=utf-8",accept:"*/*"},data:{}}),s=encodeURI(searchOption.api+o("service",a)),i=e({method:"GET",url:s,headers:{"Content-Type":"application/json; charset=utf-8",accept:"*/*"},data:{}}),d=encodeURI(searchOption.api.replace("search","articles")+"?limit=5&text="+a),p=e({method:"GET",url:d,headers:{"Content-Type":"application/json; charset=utf-8",accept:"*/*"},data:{}}),h=encodeURI(searchOption.api+o("software",a)),g=e({method:"GET",url:h,headers:{"Content-Type":"application/json; charset=utf-8",accept:"*/*"},data:{}});return t.all([c,i,p,g])}var l=document.getElementById("txtLang"),o="";l&&(o=l.value);var u=void 0;return{triggerSearch:r,executeMethod:a,performSearch:n}}]).controller("searchTopController",["$rootScope","$scope","$location","$window","$timeout","aggregatedService","$sce",function(u,c,s,i,d,p,h){function g(){var e=c.selectedSearch,t="";""!==u.searchQuery&&(t=e.queryParameter,t+=u.searchQuery);var a=e.url+t;i.location.href=a}function f(e){if(c.ajaxCallActive=!1,c.autoCompleteResult=[],e.d){var t=[];if(0===e.d.NumberOfHitsTotal)return void(c.autoCompleteResult=[]);t=e.d.Results;for(var a=0;a<t.length;a++){var r={},n=t[a];if(null!=n.data&&0!==n.data.Results.length){var l=m(n.data.Results[0].Type),o=l.length&&l.indexOf("?")>-1?"&text="+u.searchQuery:"?text="+u.searchQuery;r.showAllUrl=l+o,r.list=[];for(var s=0;s<n.data.Results.length;s++){var i=n.data.Results[s];r.title=v(i.Type),r.list.push({externalId:n.SectionName+"_"+n.Section+"_"+s,id:s,typeId:n.Section,title:i.Title,url:i.ShowDetailsUrl})}c.autoCompleteResult.push(r),console.debug(r)}}}}function v(e){if(void 0===cultureData.currentCulture||""==cultureData.currentCulture||"no"==cultureData.currentCulture)switch(e){case"dataset":return"Datasett";case"servicelayer":return"Tjenestelag";case"service":return"Tjenester";case"dimensionGroup":return"Datapakker";case"software":return"Applikasjon";case"StandardPage":return"Artikler";case"NewsPage":return"Artikler"}else if("en"==cultureData.currentCulture)switch(e){case"dataset":return"Dataset";case"servicelayer":return"Service layer";case"service":return"Service";case"dimensionGroup":return"Data package";case"software":return"Application";case"StandardPage":return"Articles";case"NewsPage":return"Articles"}}function m(e){var t=searchOption.url;switch(e){case"dataset":return t+"?Facets%5B0%5D.name=type&Facets%5B0%5D.value=dataset";case"servicelayer":return t+"?Facets%5B0%5D.name=type&Facets%5B0%5D.value=service&Facets%5B1%5D.name=type&Facets%5B1%5D.value=servicelayer";case"service":return t+"?Facets%5B0%5D.name=type&Facets%5B0%5D.value=service&Facets%5B1%5D.name=type&Facets%5B1%5D.value=servicelayer";case"dimensionGroup":return t;case"StandardPage":return t+"?facet=articles";case"NewsPage":return t+"?facet=articles";case"software":return t+"?Facets%5B0%5D.name=type&Facets%5B0%5D.value=software"}}function w(){k>0&&1==x&&(k--,0===k&&(x=null)),1==k&&x>1&&(x--,k=c.autoCompleteResult[x-1].list.length),x>1&k>1&&k--,y()}function C(){null===x?(x=1,k=1):(x==c.autoCompleteResult.length&&c.autoCompleteResult[x-1].list.length>k&&k++,x<c.autoCompleteResult.length&&(c.autoCompleteResult[x-1].list.length>k?k++:(x++,k=1))),y()}function y(){for(var e=0;e<c.autoCompleteResult.length;e++){var t=c.autoCompleteResult[e];if(e==x-1)for(var a=0;a<t.list.length;a++){var r=t.list[a];a==k-1?r.highlight=!0:r.highlight=!1}else for(var n=0;n<t.list.length;n++)t.list[n].highlight=!1}console.debug("categoryCount "+x),console.debug("resultCount "+k)}c.trustSrc=function(e){return h.trustAsResourceUrl(e)},u.trustHtml=function(e){return h.trustAsHtml(e)},c.dropdownOpen=!1,c.extendedSearchOpen=!1,c.showFakeResults=!1,c.searchString="",u.selectedSearch=searchOption,u.searchQuery=parseLocation(window.location.search).text,u.activePageUrl="//"+window.location.host+window.location.pathname+window.location.search,void 0===cultureData.currentCulture||""===cultureData.currentCulture||"no"==cultureData.currentCulture?(u.showAllText="Vis alle treff...",u.noResultsText="Søket gir ingen treff",u.loadingContentText="Henter innhold",u.loadingSearchResultsText="Henter søkeresultater"):"en"==cultureData.currentCulture&&(u.showAllText="Show all results...",u.noResultsText="Your search did not return any data",u.loadingContentText="Loading content",u.loadingSearchResultsText="Loading search results"),c.autoCompleteResult=[],c.autoCompletePartial="/dist/partials/_autoCompleteRow.html",c.focused=!1,c.autocompleteActive=!1,c.ajaxCallActive=!1,c.allowBlur=!0,c.viewport={width:window.innerWidth,height:window.innerHeight},c.breakpoints={xSmall:480,small:768,medium:992,large:1200};var D=function(e,t){e.preventDefault(),e.stopPropagation(),u.selectedSearch=t,c.dropdownOpen=!1;var a=document.getElementById("txtSearch");a.focus()};c.select=D;var R=function(e){var r;switch(e.keyCode){case t:e.target.blur(),r=angular.element(e.target).next(),r.children()[dropdownOptions.length-1].focus();break;case a:e.target.blur(),r=angular.element(e.target).next(),r.children()[0].focus();break;default:return}e.preventDefault(),e.stopPropagation()},S=function(r,n){var l;switch(r.keyCode){case e:return void D(r,dropdownOptions[n]);case t:var o=angular.element(document.getElementById("search-dropdown"));l=0===n?o.children()[dropdownOptions.length-1]:o.children()[n-1];break;case a:l=n>=dropdownOptions.length-1?angular.element(document.getElementById("search-dropdown")).children()[0]:angular.element(r.target).next()[0];break;default:return}r.target.blur(),l.focus(),r.preventDefault(),r.stopPropagation()};c.dropdownKeyDown=S,c.buttonDropdownKeyDown=R,c.onSearch=function(e){if(e&&e.preventDefault(),u.searchQuery&&!(u.searchQuery.length<3)){var t=p.triggerSearch(u.searchQuery);t.then(g)}},c.preventDefault=function(l){switch(l.keyCode){case e:l.preventDefault();break;case r:A=!0;break;case n:c.autoCompleteResult.length>0&&l.preventDefault();break;case t:case a:l.preventDefault()}};var b=null;c.autocomplete=function(s){if(c.focused!==!1){if(!u.searchQuery||u.searchQuery.length<3)return c.autoCompleteResult=[],c.autocompleteActive=!1,c.ajaxCallActive=!1,void(x=null);switch(s.keyCode){case e:null===x?(c.resetAutocomplete(),c.allowBlur=!0,c.onSearch(s)):(c.allowBlur=!1,window.location=c.autoCompleteResult[x-1].list[k-1].url);break;case r:A=!1;break;case l:break;case t:return w(),!1;case o:break;case n:A?w():C();break;case a:return C(),!1;default:return x=null,b&&(d.cancel(b),b=null,console.debug("cancel timeout")),void(b=d(function(){c.autocompleteActive=!0,console.debug("calling WS"),u.searchQuery.length>0&&(c.ajaxCallActive=!0,p.performSearch(u.searchQuery,[],5,0).then(function(e){console.debug(e);var t={d:{Results:e}};f(t)}))},300))}}};var x=null,k=null,A=!1;c.mouseOver=function(e,t,a){console.debug(t),console.debug(a),c.allowBlur=e,k=a+1,x=t+1,y()},c.mouseOut=function(e){c.allowBlur=e},c.resetAutocomplete=function(){c.focused=!1,c.autocompleteActive=!1,c.ajaxCallActive=!1,c.autoCompleteResult=[]},c.setFocus=function(e){c.focused=!0,angular.element(e.target).on("blur",function(){d(function(){c.allowBlur&&(c.resetAutocomplete(),console.debug(c.focused),angular.element(e.target).on("blur",null))},!0)})},angular.element(document).ready(function(){p.triggerSearch(u.searchQuery)})}])}();var parseLocation=function(e){var t,a,r=e.substring(1).split("&"),n={};for(a in r)""!==r[a]&&(t=r[a].split("="),n[decodeURIComponent(t[0])]=decodeURIComponent(t[1]));return n};
//# sourceMappingURL=maps/main.js.map